#ifndef UART_H
#define UART_H

#include <stdint.h>
#include <stdlib.h>
//#define UART_BAUD_SELECT(baud,cpu) ((cpu)/((baud)*16l)-1)
//#define UART_BAUD_SELECT_DOUBLE_SPEED(baud,cpu) (((cpu)/((baud)*8l)-1))

//#define UBRR_VALUE (8000000/(500000*16UL)-1)
#define UBRR_VALUE(BAUD) (F_CPU/(BAUD*16UL)-1)
#define UBRR_VALUE_DOUBLE_SPEED(BAUD) (F_CPU/(BAUD*16UL)-1)

/** Size of the circular receive buffer, must be power of 2 */
#ifndef UART_RX_BUFFER_SIZE
//#define UART_RX_BUFFER_SIZE 10
#endif
/** Size of the circular transmit buffer, must be power of 2 */
#ifndef UART_TX_BUFFER_SIZE
#define UART_TX_BUFFER_SIZE 512
#endif

enum UART_SPEED_MODE{
	USE_1X,
	USE_2X
};




void uart_init(uint32_t baud, enum UART_SPEED_MODE SendingSpeed);
//void uart_putc(unsigned char data);
//void uart_puts(const char *s );
//void uart_puts_p(const char *progmem_s);
//unsigned char uart_getc();


//uint8_t clear_link_list();
int8_t uart_heap_putc(unsigned char data);
int8_t uart_heap_puts(const char *s);
//
//
//
struct node
{
	uint8_t m_data;
	struct node * m_pnext;
};




#endif //UART_H
